\documentclass[a4paper,12pt]{article}
\usepackage[koi8-r]{inputenc}
\usepackage[russian]{babel}
\usepackage{hyperref}
\usepackage{mathtext}
\usepackage[T2A]{fontenc}
\usepackage{array}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage[justification=centering,labelsep=period]{caption}
\usepackage{indentfirst}
\usepackage[pdftex]{graphicx,color}
\usepackage{textcomp}
\usepackage{gnuplot-lua-tikz}
\usepackage{tikz}
\usepackage[europeanresistors,americaninductors]{circuitikz}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage[top=20mm,bottom=20mm,left=20mm,right=20mm]{geometry}



% \renewcommand{\captionlabeldelim} {.}

\makeatletter
\renewcommand\@biblabel[1]{#1.}
\makeatother

\unitlength=1mm

\usepackage{listings} %% собственно, это и есть пакет listings
% \usepackage{caption}
\DeclareCaptionFont{white}{\color{white}} %% это сделает текст заголовка белым
%% код ниже нарисует серую рамочку вокруг заголовка кода.
\DeclareCaptionFormat{listing}{\colorbox{white}{\parbox{\textwidth}{#1#2#3}}}
% \captionsetup[lstlisting]{format=listing,labelfont=black,textfont=black}
\renewcommand{\lstlistingname}{Листинг}


\begin{document}


\usetikzlibrary{arrows}
\usetikzlibrary{circuits}
\usetikzlibrary{circuits.ee}
\usetikzlibrary{circuits.ee.IEC}
\usetikzlibrary{circuits.logic.IEC}

\lstset{ %
 language=Bash,                 % выбор языка для подсветки (здесь это С)
 basicstyle=\small\ttfamily, % размер и начертание шрифта для подсветки кода
 numbers=left,               % где поставить нумерацию строк (слева\справа)
 numberstyle=\tiny,           % размер шрифта для номеров строк
 stepnumber=1,                   % размер шага между двумя номерами строк
 numbersep=5pt,                % как далеко отстоят номера строк от
 % подсвечиваемого кода
 backgroundcolor=\color{white}, % цвет фона подсветки - используем
 showspaces=false,            % показывать или нет пробелы специальными
% отступами
 showstringspaces=false,      % показывать или нет пробелы в строках
 showtabs=false,             % показывать или нет табуляцию в строках
 frame=single,              % рисовать рамку вокруг кода
 tabsize=2,                 % размер табуляции по умолчанию равен 2 пробелам
 captionpos=t,              % позиция заголовка вверху [t] или внизу [b] 
 breaklines=true,           % автоматически переносить строки (да\нет)
% wordwrap=true,
 breakatwhitespace=false, % переносить строки только если есть пробел
 escapeinside={\%*}{*)}   % если нужно добавить комментарии в коде
 }


 
% \cygfamily

\author{Кузнецов В.В., ассистент кафедры ЭИУ1-КФ}
\title{Лабораторная работа \No 5 по курсу <<Радиотехнические устройства и
системы>> \\
Моделирование АМ детектора и балансного смесителя в программе Qucs}
\maketitle


\section{Цель работы}

Цель данного лабораторной работы --- изучение функционирования детектора
амплитудно - модулированных (АМ) колебаний (амплитудного детектора) и балансного
смесителя с помощью моделирования в программе Qucs. 

Данная программа основана на вновь разработанном ядре схемотехнического
моделирования (разработка совместно с Берлинским институтом высокочастотной
техники) и работает под управлением операционных систем (ОС) Linux и Windows. В
данной программе возможно моделирование аналоговых и цифровых схем,
моделирование на постоянном и переменном токе и моделирование переходного
процесса. Недостатком программы является разделение аналогового и  цифрового
моделирования.

Родной операционной системой для Qucs является Linux, и при работе на этой
системы следует ожидать наибольшей производительности. Настоятельно
рекомендуется использовать для работы программы ОС Linux.

Версию Qucs для Linux можно установить в один клик, используя пакетный
менеджер, а версию для Windows можно скачать бесплатно с сайта разработчика
\url{http://qucs.souceforge.net}.

\section{Амплитудный детектор}

\subsection{Амплитудная модуляция}


Для передачи низкочастотных сигналов (например, звуковых) по радиоканалу
применяются \emph{модулированные сигналы.} Прямая передача низкочастотного
сигнала по радиоканалу невозможна, так длина волны для низких частот слишком
большая и аппаратура для передачи такой низкочастотной радиоволны была бы
слишком громоздкой. Чтобы передать низкочастотный сигнал по радиоканалу,
необходимо его каким-то образом перенести на высокие частоты. Для этого служит
модуляция. В модулированным сигнале амплитуда, частота или фаза синусоидального
высокочастотного сигнала (сигнала) изменяется в такт с низкочастотным.
Низкочастотный сигнал как бы накладывается на несущую. 

 Примером модулированного сигнала является амплитудно-модулированный (АМ)
сигнал, который представляет собой произведение огибающей $U(t)$ (низкочастотный
сигнал) на высокочастотное заполнение $\cos(\omega_0 t+\phi_0)$:

\begin{equation}
 u(t)=U(t)\cos(\omega_0 t+\varphi_0)
\end{equation}

При амплитудной модуляции связь между огибающей и модулирующим полезным
сигналом $s(t)$ выражается уравнением:
\begin{equation}
 U(t)=U_m[1+Ms(t)]
\end{equation}

Где $U_m$ --- амплитуда несущей в отсутствии модулирующего сигнала, $M$ ---
коэффициент амплитудной модуляции.

Чем выше M, тем больше глубина модуляции. Пример АМ сигнала при $M=0,5$ и
$M=0,2$ показан на рис. \ref{AM}.

\begin{figure}[!ht]
\begin{center}
\begin{tikzpicture}
\draw [-latex] (0,0)--(80mm,0) node [anchor=west]{t};
\draw [thick, xshift=3mm, x=0.008cm, y=1cm,
declare function={
s1(\t)=(1+0.75*cos(\t))*sin(10*\t);
}]
plot [domain=0:900, samples=144, smooth] (\x,{s1(\x)}); 

\draw [-latex,xshift=85mm] (0,0)--(80mm,0) node [anchor=west]{t};
\draw [thick, xshift=3mm, x=0.008cm, y=1cm, xshift=85mm,
declare function={
s1(\t)=(1+0.2*cos(\t))*sin(10*\t);
}]
plot [domain=0:900, samples=144, smooth] (\x,{s1(\x)});
\end{tikzpicture}
\end{center}
\caption{Амплитудно-модулированный сигнал при $M=0.5$ (слева) и $M=0.2$
(справа).}\label{AM}
\end{figure}

Амплитудная модуляция в настоящее время широко применяется в радиовещании в
диапазонах ДВ, СВ и КВ и в телевидении, ранее она широко применялась в
телефонной радиосвязи. Амплитудная модуляция имеет низкую помехозащищённость и
поэтому её применение в настоящее время сокращается.

\subsection{Принцип работы амплитудного детектора}

Амплитудный детектор нужен для того, чтобы из АМ колебания восстановить сигнал
звуковой частоты. АМ детектор является обязательным узлом радиовещательных
приёмников прямого усиления и супергетеродинов. 

Чтобы восстановить звуковую частоту из АМ сигнала, его нужно пропустить через
нелинейный элемент. Простейшим нелинейным элементом является полупроводниковый
диод. Схема простейшего АМ детектора показана на рис.\ref{d-sch}.


\begin{figure}[!ht]
\begin{center}
\begin{tikzpicture}[circuit ee IEC]
\node (in) [contact] at (0,0) {};
\node [align=center] at (0,0.3) {Вход};
\node (VD1) [diode, point right, info=VD]  at (1,0) {};
\node (R1) [resistor, point up, info=R] at (2,-1.5) {};
\node (out) [contact] at (3,0) {};
\node [align=center] at (3,0.3) {Выход};
\node (p1) [contact] at (2,0) {};
\node (gnd) [point down, ground] at (2,-2.5) {};
\draw (in) -| (R1) -- (gnd);
\draw (VD1) -- (out);
\end{tikzpicture}
\end{center}
\caption{Простейший АМ детектор}\label{d-sch}
\end{figure}

Диод проводит ток только в одном направлении, поэтому отрицательная
полуволна АМ колебания, после того как оно пропущено через диод отсекается. В
результирующем колебании содержится составляющая со звуковой частотой и
составляющая с частотой ВЧ заполнения. Чтобы отсечь ВЧ составляющую и получить
на выходе звуковую частоту, на выходе АМ - детектора включают фильтр низких
частот (ФНЧ). Простейшим ФНЧ является блокировочный конденсатор, включаемый
параллельно резистору R на схеме на рис.\ref{d-sch}. Реактивное сопротивление
конденсатора на высокой частоте мало и он как бы замыкает ВЧ токи на землю, а
на выходе схемы остаётся напряжение звуковой частоты.

Падение напряжения на p-n переходе диода ($U_{пр}$) в АМ-детекторе должно быть
как можно меньше. Поэтому в диодном детекторе используются германиевые диоды
($U_{пр}=0.1\div0.3В$). У кремниевых диодов $U_{пр}\approx0.6В$. Чем меньше
прямое падение напряжения на диоде, тем меньше искажения звукового сигнала,
снимаемого с выхода детектора.

\subsection{Моделирование амплитудного детектора}

Произведём моделирование АМ детектора в программе Qucs. Сначала собираем схему
(рис.\ref{am-d}). Диод применяем кремниевый типа 1N4148, берём его из
библиотеки компонентов. Элементы R1, R2, C2, C3 образуют ФНЧ. Вход схемы ---
узел \verb|in|, выход схемы --- узел \verb|out|.

\begin{figure}[!ht]
\begin{center}
\includegraphics[width=\textwidth]{Lab5ris/AM-detector.png}
\end{center}
\caption{Схема АМ детектора в программе Qucs}\label{am-d}
\end{figure}

Схема содержит источник амплитудно-модулированных колебаний (выделено на
рисунке стрелкой). Для этого источника нужно установить амплитуду,
частоту и глубину модуляции. В ходе моделирования примем частоту равной 7 МГц,
амплитуду равной 1 В и глубину модуляции равной 0.2. АМ источник нужно связать
с источником модулирующей частоты. Это обычный источник синусоидального
напряжения с частотой 20 кГц и амплитудой 1 В.

Для схемы проведём моделирование переходного процесса (Transient Analisys).
Параметры моделирования: начало моделирования 0мкс, конец моделирования
1мс=1000мкс, число точек для расчёта 10001. И построим осциллограммы
переходного процесса на входе (\verb|in.Vt|) и на выходе (\verb|out.Vt|) схемы.

\begin{figure}[!ht]
\begin{center}
\includegraphics[width=\textwidth]{Lab5ris/AM_d_res.png}
\end{center}
\caption{Результаты работы АМ детектора}\label{am-d-res}
\end{figure}

\section{Балансный смеситель}

\subsection{Принцип работы}

\emph{Смеситель} --- радиотехническое устройство для преобразование частоты
сигналов. Смеситель имеет два входа и один выход. Если на один из его входов
подать синусоидальное напряжение с частотой сигнала $f_c$, а на другой вход
подать синусоидальное напряжение от местного генератора, называемого
\emph{гетеродином}, с частотой $f_г$, то на выходе смесителя мы получим
сумму нескольких синусоидальных колебаний с частотами равными $mf_с \pm nf_г$,
где $m$ и $n$ --- целые числа больше или равные нулю (рис.\ref{mixer}).

\begin{figure}[!ht]
\begin{center}
\begin{tikzpicture}
\draw [-latex] (0,0) node [anchor=north] {$f_c$}-- (15mm,0);
\draw (20mm,0) circle (5mm);
\draw (16.47mm,-3.53mm)--(23.53mm,3.53mm);
\draw (16.47mm,3.53mm)--(23.53mm,-3.53mm);
\draw [-latex] (20mm,-13mm)node [anchor=north]{$f_г$} -- (20mm,-5mm) ;
\draw [-latex] (25mm,0) -- (35mm,0) node [anchor=north] {$mf_с \pm nf_г$};
\end{tikzpicture}
\end{center}
\caption{Схематическое изображение смесителя}\label{mixer}
\end{figure}

Также на выход смесителя в неизменном виде проходят частота сигнала,
частота гетеродина и их гармоники (кратные частоты). Наибольшую амплитуду из
сигналов с частотой, отличной от частоты сигнала и гетеродина, имеют сигналы
суммарной частоты $f=f_с+f_г$ и разностной частоты $f=f_с-f_г$. Таким образом,
смеситель преобразует частоту сигнала в разностную или суммарную частоту.

Внутри смесителя всегда содержится нелинейный элемент: диод, транзистор и т.п.
Применяется включение нескольких диодов и транзисторов. Простейшим смесителем
является полупроводниковый диод. При этом схема смесителя не отличатся от схемы
амплитудного детектора (рис.\ref{d-sch}), но на вход схемы подаются два
синусоидальных напряжения: от источника сигнала и от гетеродина.

Смеситель является основным узлом всех современных приёмников радиосигналов.
Смеситель позволяет переносить частоту радиосигнала из одного диапазона на
другой.

\emph{Балансный смеситель} отличается тем, что на его выходе отсутствуют
сигналы с частотой входного сигнала и гетеродина, а имеются только суммарные и
разностные частоты. Подавление частоты сигнала и гетеродина достигается
специальной схемотехникой балансного смесителя. Одна из простейших схем ---
диодный кольцевой смеситель на четырёх диодах будет рассмотрена в следующем
разделе. 

\subsection{Моделирование диодного кольцевого смесителя}

Сначала собираем схему в Qucs (см. рис.\ref{mixer-qucs}). Схема содержит
источники синусоидального напряжения с выходным сопротивлением 50 Ом
(стандартный импеданс для ВЧ техники). Они находятся на панели компонентов на
закладке <<Источники питания>>. Расположение этого компонента показано стрелкой
на рис.\ref{mixer-qucs}. На один вход смесителя (узел, помеченный
\verb|heterodin|) подключен источник частотой 15 МГц и с уровнем сигнала 0
дБмВт. Этот источник имитирует напряжение гетеродина.  На другой вход (узел,
помеченный \verb|signal|) подключен источник с частотой 7 МГц и уровнем сигнала
--40 дБмВт. Этот источник имитирует напряжение сигнала. Выходной сигнал
снимается со средней точки трансформатора Tr2. Выход помечен как \verb|out|.


\begin{figure}[!ht]
\begin{center}
\includegraphics[width=\textwidth]{Lab5ris/Mixer-sch.png}
\end{center}
\caption{Кольцевой диодный смеситель в программе Qucs}\label{mixer-qucs}
\end{figure}

Особенностью диодного кольцевого смесителя является, то что он
содержит в своём составе симметрирующие трансформаторы. Чтобы промоделировать
трансформаторы, служит компонент <<Три индуктивно связанные катушки>>.
Установка параметров данного компонента показана на рис.\ref{transf_set}.
Индуктивность обмоток трансформатора равна 100 мкГн, а коэффициент связи между
обмотками равен 0.99. Следует отметить, что полностью промоделировать
трансформаторы сложно, и такая модель является приближённой.

\begin{figure}[!ht]
\begin{center}
\includegraphics[width=0.4\textwidth]{Lab5ris/Transf-setup.png}
\end{center}
\caption{Установка параметров симметричных трансформаторов}\label{transf_set}
\end{figure}

Теперь разберём, какие операции выполняет компонент Уравнение1 на
рис.\ref{mixer-qucs}. Чтобы узнать какие частоты присутствуют в выходном
сигнале, нужно вычислить спектр. Для вычисления спектра в Qucs служит функция
\verb|Time2Freq()|, которая выполняет быстрое преобразование Фурье. Параметром
функции является напряжение переходного процесса, полученное в результате
моделирования (Transient Analisys). Функция возвращает массив данных в частотной
области, который можно затем использовать для построения графиков.

Чтобы узнать спектральный состав напряжения и выразить его в децибелах на
выходе нужно поместить на схеме уравнение:

\begin{verbatim}
 S=dB(Time2Freq(out.Vt))
\end{verbatim}

В результате в переменной \verb|S| мы получим спектр, который можно вывести на
график. Чтобы преобразование Фурье выполнялось точнее, нужно использовать
больше точек расчёта переходного процесса. 



\section{Заключение}

В результате выполнения лабораторной работы произведено ознакомление с
типами анализа электронных схем в схемотехническом моделировщике Qucs. Выполнен
анализ работы резонансного усилителя на полевом транзисторе.

\end{document}
